(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{51:function(e,n,t){},52:function(e,n,t){"use strict";t.r(n);var c=t(2),s=t(20),a=t.n(s),r=t(3),o=t(5),u=t.n(o),i="/api/persons",d=function(){return u.a.get(i).then((function(e){return e.data}))},j=function(e){return u.a.post(i,e).then((function(e){return e.data}))},l=function(e){return u.a.delete("".concat(i,"/").concat(e)).then((function(e){return e.data}))},b=function(e,n){return u.a.put("".concat(i,"/").concat(e),n).then((function(e){return e.data}))},h=t(0),m=function(e){var n=e.person,t=e.persons,c=e.setPersons,s=e.message;return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:n.name}),Object(h.jsx)("td",{children:n.number}),Object(h.jsx)("td",{children:Object(h.jsx)("button",{onClick:function(){window.confirm("delete contact ".concat(n.name,"?"))&&l(n.id).then((function(e){c(t.filter((function(e){return e.id!==n.id}))),s({message:"".concat(n.name," has been removed"),type:"msg"})})).catch((function(e){s({message:"".concat(n.name," was already removed"),type:"msg"}),console.log("could not delete beacuse person was not found",n),d().then((function(e){c(e)}))}))},children:"delete"})})]})},f=function(e){var n=e.persons,t=e.setPersons,c=e.match,s=e.message,a=n.filter((function(e){return e.name.toLowerCase().includes(c.toLowerCase())}));return Object(h.jsx)("table",{children:Object(h.jsx)("tbody",{children:a.map((function(e){return Object(h.jsx)(m,{person:e,persons:n,setPersons:t,message:s},e.id)}))})})},p=t(9),O=function(e){var n=e.persons,t=e.setPersons,s=e.message,a=Object(c.useState)(""),o=Object(r.a)(a,2),u=o[0],i=o[1],l=Object(c.useState)(""),m=Object(r.a)(l,2),f=m[0],O=m[1];return Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=n.filter((function(e){return e.name===u}));if(c.length>0){if(!window.confirm("\n        ".concat(u," has already been added, update number?")))return;var a=Object(p.a)(Object(p.a)({},c[0]),{},{number:f});b(c[0].id,a).then((function(e){t(n.map((function(e){return e.id===c[0].id?a:e}))),s({message:"number updated",type:"msg"})})).catch((function(e){s({message:"".concat(u," was removed"),type:"error"}),console.log("could not update beacuse person was not found",u),d().then((function(e){t(e)}))}))}else{var r={name:u,number:f};j(r).then((function(e){t(n.concat(e)),s({message:"added new contact ".concat(r.name),type:"msg"})})).catch((function(e){console.log(e.response.data),s({message:e.response.data.error,type:"error"})}))}},children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:u,onChange:function(e){i(e.target.value)}})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{value:f,onChange:function(e){O(e.target.value)}})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})},g=function(e){var n=e.newSearch,t=e.handleSearchChange;return Object(h.jsxs)("div",{children:["search: ",Object(h.jsx)("input",{value:n,onChange:t})]})},x=function(e){var n=e.message;return null===n?null:Object(h.jsx)("div",{className:n.type,children:n.message})},v=function(){var e=Object(c.useState)([]),n=Object(r.a)(e,2),t=n[0],s=n[1],a=Object(c.useState)(""),o=Object(r.a)(a,2),u=o[0],i=o[1],j=Object(c.useState)(null),l=Object(r.a)(j,2),b=l[0],m=l[1],p=function(e){setTimeout((function(){return m(null)}),2e3),m({message:e.message,type:e.type})};Object(c.useEffect)((function(){d().then((function(e){s(e)}))}),[]);return Object(h.jsxs)("div",{children:[Object(h.jsx)(x,{message:b}),Object(h.jsx)("h1",{children:"Phonebook"}),Object(h.jsx)("h2",{children:"Add a new contact"}),Object(h.jsx)(O,{persons:t,setPersons:s,message:p}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(g,{newSearch:u,handleSearchChange:function(e){i(e.target.value)}}),Object(h.jsx)(f,{persons:t,setPersons:s,match:u,message:p})]})};t(51);a.a.createRoot(document.getElementById("root")).render(Object(h.jsx)(v,{}))}},[[52,1,2]]]);
//# sourceMappingURL=main.aaaaf6e2.chunk.js.map